const admin = require("firebase-admin");
const grpc = require("grpc");
const serviceAccount = require("path/to/key/file");
admin.initializeApp({
    credential: admin.credential.cert(serviceAccount),
    databaseURL: "https://map-project-test-addressya.firebaseio.com"
});
const firestore = admin.firestore();
firestore.settings({ grpc });

async function checkInsideObjectDummyDataArray() {
    try {
        console.time("checkInsideObjectDummyDataArray ")

        const data = await admin.firestore().collection('dummyData')
            .where("profile.city", "in", 'ahmedabad')
            .get()
            .then(snapshot => {
                if (snapshot.empty) {
                    return null;
                }
                if (snapshot.empty) {
                    return [];
                }
                return snapshot.docs.map(doc => doc.data());
            });

        console.log("Length ", data.length)

        console.timeEnd("checkInsideObjectDummyDataArray ")


    } catch (error) {
        console.log(error)
    }
}

checkInsideObjectDummyDataArray()