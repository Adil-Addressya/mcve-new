const admin = require("firebase-admin");
const grpc = require("grpc");
const serviceAccount = require("path/to/key/file");
admin.initializeApp({
    credential: admin.credential.cert(serviceAccount),
    databaseURL: "https://map-project-test-addressya.firebaseio.com"
});
const firestore = admin.firestore();
firestore.settings({ grpc });

async function checkSubCollectionDummyData() {
    try {
        console.time("checkSubCollectionDummyData")

        const data = await admin.firestore().collectionGroup('dummySubCollection')
            .where('city', '==', 'ahmedabad')
            .get()
            .then(snapshot => {
                if (snapshot.empty) {
                    return null;
                }
                if (snapshot.empty) {
                    return [];
                }
                return snapshot.docs.map(doc => doc.data());
            });

        console.log("Length ", data.length)

        console.timeEnd("checkSubCollectionDummyData")


    } catch (error) {
        console.log(error)
    }
}

checkSubCollectionDummyData()